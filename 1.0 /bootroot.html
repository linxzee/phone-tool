<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>深刷提取备份刷入（救砖）指南</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <main class="content-wrapper">
        <a href="index.html" class="back-to-home">&larr; 返回首页</a>
        <h1>深刷提取备份刷入（救砖）</h1>
        <p class="author-info">适用大多数设备，高通设备大多需要拆机找触点</p>

        <h2>工具和系统</h2>
        <ul>
            <li>MTK深度刷机备份：<a href="MTKClient.html">MTKClient使用教程</a></li>
            <li>QPT9008：<a href="Qualcomm-Premium-Tool-9008.html">QPT教程</a></li>
            <li>MIko9008：<a href="MiKoPro.html">Miko教程</a></li>
            <li>Lineage GSI网站：<a href="Lineage-GSI.html">GSI使用教程</a></li>
        </ul>
        
        <h2>GSI提取boot获取root（Userdebug版本）</h2>
        <p>需要先分辨好设备的分区类型，再提取对应类型的文件。</p>
        
        <h3>所需软件：</h3>
        <ul>
            <li>ADB环境：<a href="https://linxize.lanzout.com/irvNf34zpx2d" target="_blank" rel="noopener">点击下载</a></li>
            <li>通杀驱动：<a href="https://linxize.lanzout.com/iopQy34zpx9a" target="_blank" rel="noopener">点击下载</a></li>
            <li>TrebleCheck：<a href="https://linxize.lanzout.com/iOOAP34zhpsd" target="_blank" rel="noopener">点击下载</a></li>
            <li>底层探测器：<a href="https://linxize.lanzout.com/iRZ5q34zp1mb" target="_blank" rel="noopener">点击下载</a></li>
        </ul>

        <h3>分区类别：</h3>
        <ul>
            <li><b>PT功能</b>：Project Treble安卓通用镜像标准，支持的可以刷GSI，安卓8引入，安卓9强制支持。</li>
            <li><b>Aonly分区</b>：不支持无缝系统更新，使用<code>boot</code>来root</li>
            <li><b>AB/VAB分区</b>：支持无缝系统更新，使用<code>boot_a</code>和<code>b</code>来root</li>
            <li><b>AB/VAB分区(出厂安卓13+)</b>：支持无缝系统更新，使用<code>init_boot_a</code>和<code>b</code>来root</li>
            <li><b>SAR（System-as-root）</b>：如果设备支持SAR，即便不支持AB分区，也需要下载带ab格式的GSI刷机包</li>
        </ul>

        <p>解锁后进入bootloader模式，使用命令刷入gsi：<code>fastboot flash system [gsi_image_name.img]</code></p>
        <p>使用命令清除分区数据：<code>fastboot erase userdata</code></p>
        <p>进入系统后开USB调试，使用ADB命令行，输入<code>adb shell</code>进入，输入<code>su</code>获取命令行root权限。</p>

        <div class="highlight">
            <h2>※重点※ 提取分区命令 ※重点※</h2>
            <p>eMMC闪存</p>
            <ol>
                <li><code>adb shell</code></li>
                <li><code>su</code></li>
                <li>获取分区位置：<code>find /dev/block/platform/ -name 'by-name' -type d</code></li>
                <li>返回路径：各机型不同，返回的值也不同</li>
                <li>进入分区位置：<code>cd [粘贴第4步的返回值]</code></li>
                <li>输入获取boot分区的路径：<code>ls -l boot</code> (mmcdlk开头就是boot分区)</li>
            </ol>
            <br>
            <p>UFS闪存</p>
            <ol>
                <li><code>adb shell</code></li>
                <li><code>su</code></li>
                <li>使用cd命令进入即可：<code>cd /dev/block/by-name/</code></li>
                <li>输入获取boot分区的路径：<code>ls -l boot</code> (sd开头就是boot分区)</li>
            </ol>
            <br>
            <p>确认分区位置后，使用dd命令来导出分区。命令格式：<code>dd if=[分区实际位置] of=[要保存的位置]</code></p>
            <p>例如：<code>dd if=/dev/block/sdc56 of=/sdcard/boot_a.img</code></p>
        </div>
        
        <h2>修补与刷入</h2>
        <p>提取之后的分区使用面具或者KSU修补，修补后使用以下命令刷入。</p>
        
        <h3>Fastboot模式刷入：</h3>
        <ul>
            <li>重启到fastboot模式：<code>adb reboot bootloader</code></li>
            <li>Aonly分区：<code>fastboot flash boot [修补后文件]</code></li>
            <li>AB分区：<code>fastboot flash boot_a [修补后文件]</code> 和 <code>fastboot flash boot_b [修补后文件]</code></li>
            <li>AB分区且安卓13+：<code>fastboot flash init_boot_a [修补后文件]</code> 和 <code>fastboot flash init_boot_b [修补后文件]</code></li>
        </ul>

        <h3>dd命令刷入：</h3>
        <ul>
            <li>开机状态进入命令行root也就是su模式。</li>
            <li><code>dd if=[修补后的boot位置] of=[boot分区的实际位置]</code></li>
            <li>从哪提取的分区就刷到那个分区，不区分分区类型。</li>
        </ul>
        
        <div class="note">
            <h3>刷全系统包注意事项:</h3>
            <p><b>AB分区（动态分区）机型</b>：system、vendor等小分区被合并进super大分区。刷super大分区可在fastboot模式下进行，但刷system、vendor等小分区需在fastbootd模式进行。</p>
            <ul>
                <li>进入fastboot模式：<code>adb reboot bootloader</code></li>
                <li>进入fastbootd模式：<code>adb reboot fastboot</code> 或 <code>fastboot reboot fastboot</code></li>
            </ul>
        </div>
    </main>
    <script src="js/main.js" defer></script>
</body>
</html>
