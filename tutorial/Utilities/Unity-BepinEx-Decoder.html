<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unity引擎BepInEx框架解码完整指南</title>
    <link rel="icon" type="image/png" href="../../main/images/logo.png">
    <link rel="stylesheet" href="../../main/css/styles.css">
    <link rel="stylesheet" href="../../main/css/navbar.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

    <div id="navbar-placeholder"></div>

    <main class="container">
        <div class="content-section">
            <h1>Unity引擎BepInEx框架解码完整指南</h1>
        <p class="meta-info">作者：芝士 | 最后更新：2025年</p>
        
        <!-- 下载链接区域 -->
        <div class="download-links">
            <h3>📥 资源下载</h3>
            <ul>
                <li><strong>Mono脚本BepInEx：</strong><a href="https://github.com/BepInEx/BepInEx/releases" target="_blank" rel="noopener noreferrer">GitHub Releases下载</a></li>
                <li><strong>IL2CPP脚本BepInEx：</strong><a href="https://builds.bepinex.dev/projects/bepinex_be" target="_blank" rel="noopener noreferrer">BepInEx Builds下载</a></li>
                <li><strong>首选解码插件：</strong><a href="https://github.com/trimmerpop/UniversalUnityDemosaics/releases" target="_blank" rel="noopener noreferrer">UniversalUnityDemosaics下载</a></li>
                <li><strong>备用解码插件：</strong><a href="https://github.com/ManlyMarco/UniversalUnityDemosaics/releases" target="_blank" rel="noopener noreferrer">备用版本下载</a></li>
                <li><strong>AssetStudio工具：</strong><a href="https://github.com/aelurum/AssetStudio/tags" target="_blank" rel="noopener noreferrer">AssetStudio下载</a></li>
            </ul>
        </div>
        
        <!-- 关于解码的基础知识 -->
        <h2>🎓 解码基础知识</h2>
        <p>在开始解码之前，了解一些基本概念很重要：</p>
        
        <div class="tip-box">
            <h3>🔍 遮挡类型说明</h3>
            <p><strong>动态遮挡（可移除）：</strong></p>
            <ul>
                <li>可以通过插件移除的遮挡效果</li>
                <li>在移动视角时会随着视角变动而闪烁</li>
                <li>相当于在贴图上添加了半透明层</li>
            </ul>
            <p><strong>静态遮挡（不可移除）：</strong></p>
            <ul>
                <li>无法通过插件移除的遮挡</li>
                <li>不会随着视角移动而闪烁</li>
                <li>通常是直接绘制在贴图上的</li>
            </ul>
            <p><strong>注意事项：</strong>如果移除遮挡后仍然看不到内容，可能是开发者没有在遮挡区域绘制完整内容。这种情况下需要使用AssetStudio和UABE工具导出贴图并手动绘制，过程较为复杂。</p>
            <p><strong>替代方案：</strong>如果觉得此方法过于复杂，可以尝试更便捷的解码方案：<a href="3dmigoto-unity-unreal-decoder.html" target="_blank" rel="noopener noreferrer">3Dmigoto：Unity与虚幻引擎解码</a></p>
        </div>

        <!-- 第一步：检查游戏脚本类型 -->
        <h2>🔍 第一步：检查游戏脚本类型</h2>
        <p>首先需要确定游戏使用的是哪种脚本后端：</p>
        
        <div class="code-block">
📁 检查游戏目录结构：
- 存在Mono文件夹或Managed文件夹 → Mono脚本
- 存在il2cpp_data文件夹 → IL2CPP脚本
        </div>
        
        <p>根据脚本类型下载对应的BepInEx框架：</p>
        <div class="code-block">
📋 框架版本选择：
Mono脚本：下载名称中不带IL2CPP的版本（通常是BepInEx 5）
示例：BepInEx_win_x64_5.4.23.4.zip

IL2CPP脚本：下载名称中包含IL2CPP的版本
示例：BepInEx-Unity.IL2CPP-win-x64-6.0.0-be.738+af0cba7.zip
        </div>

        <div class="tip-box">
            <h3>💡 架构识别提示</h3>
            <p>检查游戏根目录下的UnityCrashHandler文件：</p>
            <ul>
                <li><code>UnityCrashHandler32.exe</code> → 32位游戏</li>
                <li><code>UnityCrashHandler64.exe</code> → 64位游戏</li>
            </ul>
            <p>下载框架时：32位游戏选择x86版本，64位游戏选择x64版本</p>
        </div>

        <!-- 第二步：安装BepInEx框架 -->
        <h2>⚙️ 第二步：安装BepInEx框架</h2>
        <p>将下载的BepInEx框架压缩包中的所有文件解压到游戏根目录：</p>
        
        <div class="code-block">
🛠️ 安装步骤：
1. 将BepInEx压缩包解压到游戏根目录
2. 启动游戏（首次运行需要翻墙）
3. 检查BepInEx文件夹是否生成新的配置文件
        </div>
        
        <p>框架安装成功后，BepInEx文件夹会生成新的配置文件和日志，表示框架已正常加载。</p>

        <!-- 第三步：安装解码插件 -->
        <h2>🔌 第三步：安装解码插件</h2>
        <p>将解码插件的DLL文件放置到指定位置：</p>
        
        <div class="code-block">
📁 插件安装路径：
将解码插件的DLL文件放置到：
BepInEx\plugins\ 文件夹中
        </div>
        
        <p>插件放置完成后，重新启动游戏即可生效。</p>

        <!-- 常见问题 -->
        <h2>🔧 常见问题解决</h2>
        
        <h3>1. 控制台开关设置</h3>
        <p>如需开启或关闭控制台窗口：</p>
        <div class="code-block">
⚙️ 控制台配置：
打开文件：BepInEx\config\BepInEx.cfg

找到 [Logging.Console] 部分：
Enabled = false

修改为：
Enabled = true   # 开启控制台
Enabled = false  # 关闭控制台
        </div>
        <p>BepInEx 5默认关闭控制台，BepInEx 6默认开启控制台</p>

        <h3>2. 与翻译组件冲突解决</h3>
        <p>如果之前安装了翻译组件，需要先删除相关文件：</p>
        <div class="code-block">
🗑️ 冲突文件清理：
删除游戏根目录下的文件夹：
- AutoTranslator
- ReiPatcher

删除 xxx_data/Managed 文件夹下的文件：
- 0Harmony.dll
- ExIni.dll
- Mono.Cecil.dll
- MonoMod.RuntimeDetour.dll
- MonoMod.Utils.dll
- ReiPatcher.exe
- UnityEngine.CoreModule.dll
- XUnity.AutoTranslator.Plugin.Core.dll
- XUnity.AutoTranslator.Plugin.ExtProtocol.dll
- XUnity.Common.dll
- XUnity.ResourceRedirector.dll
        </div>

        <div class="tip-box">
            <h3>💡 使用提示</h3>
            <ul>
                <li>如果启动游戏后框架没有正常加载（BepInEx文件夹内没有生成新文件），可能是框架版本选择错误</li>
                <li>确保下载的框架版本与游戏架构（32位/64位）匹配</li>
                <li>如果解码后仍然看不到内容，可能是静态遮挡或开发者没有绘制相关内容</li>
                <li>建议在操作前备份游戏文件</li>
            </ul>
        </div>

        <div class="tip-box">
            <h3>⚠️ 重要提示</h3>
            <p>本教程适用于大多数Unity引擎游戏，但具体效果可能因游戏版本和实现方式而异。建议：</p>
            <ul>
                <li>在操作前备份游戏文件</li>
                <li>确保游戏支持BepInEx框架</li>
                <li>如遇到问题，请参考相关社区讨论</li>
            </ul>
        </div>
        
        <p>完成以上步骤后，重新启动游戏即可体验解码效果。</p>
        </div>
    </main>
    
    <script src="../../main/js/navbar.js" defer></script>
    <script>
        fetch('../../main/components/navbar.html')
            .then(response => {
                if (!response.ok) {
                    console.error('Fetch error:', response.statusText);
                    throw new Error('Network response was not ok');
                }
                return response.text();
            })
            .then(html => {
                document.getElementById('navbar-placeholder').innerHTML = html;
                if (typeof initNavbar === 'function') {
                    initNavbar();
                }
            })
            .catch(error => {
                console.error('Error loading navbar:', error);
            });
    </script>
    
    <script src="../../main/js/utils.js" defer></script>
</body>
</html>
